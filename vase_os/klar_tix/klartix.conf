# Configuration consts

# Host package manager for prerequisites
PKG_MAN="pacman"
PKG_MAN_W="-S"
ARG1="--noconfirm --needed"

# Init system selection (openrc, runit, s6, dinit)
INIT_SYSTEM="runit"
# Tested openrc and runit boots fine, know nothing about s6 and dinit soz
# Very fast boot, but LUKS can slow it down quite a bit

# Prefs
TARGET_FS="ext4" # Filesystem: ext4, btrfs, xfs, f2fs
EFI_SIZE="1GiB" # Default

# Use zram for swap instead of partition
USE_ZRAM=1 # 0=no zram, 1=zram swap

KB_LAYOUT="us"
TARGET_TIMEZONE="Europe/Paris"
TARGET_HOSTNAME="klartix"

# Important stuff
SEPARATE_HOME=0 # 0=/home on root LV, 1=separate /home LV
## Warning LUKS password needs US layout for grub
ENABLE_LUKS=1 # Always enabled - uses LVM on LUKS2

# Kernel selection (linux, linux-lts, linux-zen, linux-hardened)
KERNEL="linux" # Options: linux, linux-lts, linux-zen, linux-hardened

# Modern LVM on LUKS layout with /efi mount and zram swap
# Partition layout: EFI (1GB) + LUKS container → LVM logical volumes
# | Config        | EFI   | Boot         | Root LV   | Home LV   | Swap   | Prompts        |
# |---------------|-------|--------------|-----------|-----------|--------|----------------|
# | SEPARATE_HOME=0| /efi | /boot (root) | Encrypted | (in root) | zram   | 1 (GRUB only)  |
# | SEPARATE_HOME=1| /efi | /boot (root) | Encrypted | Encrypted | zram   | 1 (GRUB only)  |
#
# Device mapping:
# /dev/sdX1 → /efi (FAT32)
# /dev/sdX2 → LUKS → /dev/mapper/cryptlvm → LVM VG → logical volumes

################# REQUIRED PACKAGES

# LVM and encryption packages for all init systems
LVM_PACKAGES="lvm2 cryptsetup"
LVM_OPENRC="device-mapper-openrc lvm2-openrc cryptsetup-openrc"
LVM_RUNIT="device-mapper-runit lvm2-runit cryptsetup-runit"
LVM_S6="device-mapper-s6 lvm2-s6 cryptsetup-s6"
LVM_DINIT="device-mapper-dinit lvm2-dinit cryptsetup-dinit"

# Zram is built into kernel - no packages needed

################# HW GROUPS

# CPU Vendors & Microcode
HW_CPU_AMD="amd-ucode"
HW_CPU_INTEL="intel-ucode"

# All Open-Source Drivers
HW_ALL_OPENSOURCE="mesa xf86-video-amdgpu xf86-video-ati xf86-video-nouveau libva-mesa-driver libva-intel-driver intel-media-driver vulkan-radeon vulkan-intel vulkan-nouveau"

# AMD/ATI Graphics (Open-Source)
HW_AMD_OPENSOURCE="mesa xf86-video-amdgpu xf86-video-ati libva-mesa-driver vulkan-radeon"

# Intel Graphics (Open-Source)
HW_INTEL_OPENSOURCE="mesa libva-intel-driver intel-media-driver vulkan-intel"

# Nvidia Graphics - Proprietary Driver
HW_NVIDIA_PROPRIETARY="nvidia-dkms dkms"

# Nvidia Graphics - Open Kernel Module (Turing+)
HW_NVIDIA_OPEN_KERNEL="nvidia-open-dkms dkms"

# Nvidia Graphics - Open-Source (Nouveau)
HW_NVIDIA_OPENSOURCE="mesa xf86-video-nouveau libva-mesa-driver vulkan-nouveau"

# Hybrid Graphics - Nvidia Prime (Intel + Nvidia) iGPU + dGPU
HW_NVIDIA_PRIME="nvidia-prime"

# Virtual Machine - QEMU/KVM
HW_VM_QEMU="mesa vulkan-virtio qemu-guest-agent vulkan-swrast libva-mesa-driver"

# Virtual Machine - VirtualBox
HW_VM_VIRTUALBOX="mesa vulkan-swrast virtualbox-guest-utils libva-mesa-driver"

# Audio Firmware - SOF (Sound Open Firmware)
HW_AUDIO_SOF="sof-firmware"

# Audio Firmware - ALSA
HW_AUDIO_ALSA="alsa-firmware"